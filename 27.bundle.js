"use strict";(self.webpackChunkcboy_blog=self.webpackChunkcboy_blog||[]).push([[27],{27:function(e,o,p){p.r(o),p.d(o,{default:function(){return a}});var c=p(358);const t={class:"component-webpack"},s={};var a=(0,p(389).A)(s,[["render",function(e,o){return(0,c.uX)(),(0,c.CE)("div",t,o[0]||(o[0]=[(0,c.Fv)('<h4>一 webpack 是什么？</h4><p>它是一个打包工具。 噗，完啦？</p><p>来，我们看官方概念: webpack 是一个现代 JavaScript 应用程序的静态模块打包工具。当 webpack 处理应用程序时，它会在内部构建一个 依赖图(dependency graph)，此依赖图会映射项目所需的每个模块，并生成一个或多个 bundle。</p><p>内部如何构建一个依赖图，我们知道 webpack 会配置一个入口，这就是从这入口文件开始， 找到所有被依赖到的文件，比如其他 js / image / json 文件等，然后通过 loader 对这些文件进行处理、编译、打包、优化，生成一个 bundle 或者多个 bundle。</p><h4>它的原理</h4><p>通过以上，主要就是找依赖, 通过配置处理相应环境，根据你的需要配置插件进行优化（如 profill、babel、 miniSize etc) 打包出文件，可以放到服务器上运行。</p><p>关于找依赖，可以想到关于模块化的语法: import 、require、@import etc， 通过解析对应的语法寻找相应的依赖。然后通过读取依赖到的文件，根据对应的 loader 进行处理文件，最后根据你的插件配置，分割，压缩或注入等，根据 output config输出到对应的文件夹。</p><p>这里推荐一篇 <a href="https://juejin.im/entry/5b0e3eba5188251534379615">webpack原理</a> 文章, 下面就提一提我最近遇到的一个很神奇的问题吧</p><h4>关于 <a href="https://webpack.docschina.org/guides/tree-shaking/">tree shaking</a></h4><p>想象抖一抖树，枯萎的叶子就会脱落。 这里指的是把没有用到的代码删除掉，从而减小文件的大小。通过这一优化，在引用多个第三方库时，能够大大的减少你的文件大小，但请确定这个包是没有副作用的。</p><blockquote><p>什么是副作用? 就是在导入时会自行运行一段函数，从而改变了 window 变量啊或者其他的变量以供导入的包能正常运行， 而不是只单单 export 了变量。</p></blockquote><p>它是依赖于 es2015 的 <code>静态导入导出( import / export)</code>。在打包时就会通过 import 确定引用包的 export 导出的某一个变量之一， 在告知没有副作用的情况下，删除掉没有用到的其他的导出代码。</p><blockquote><p>静态导入是指一开始就默认加载这个文件，而不是一步一步执行代码判断逻辑，去导入对应文件</p></blockquote><p>webpack 在生成环境下，默认打开树抖动配置, 如下配置。</p><pre><code>optimization： {\n\tprovidedExports: true,\n\tusedExports: true,\n\tsideEffects: true,\n\tconcatenateModules: true,\n }\n</code></pre><p><code>providedExports</code> 开启 export 导出收集； <code> usedExportts</code> 告诉webpack确定每个模块的已使用导出； <code> concatenateModules</code> 告诉webpack查找模块图的各个部分，这些部分可以安全地连接成一个模块； <code>sideEffects</code> 告诉webpack识别 sideEffects 标志的 package.json 或规则以跳过模块，这些模块在未使用导出时被标记为不包含副作用， 则可以把无副作用的未使用的导出进行删除。</p><p>所以如果你的包无副作用，推荐在 package.json 设置 <code>sideEffects: false</code> 开启树抖动。 注意, 它会删掉样式文件，因为样式文件是没有 export 的。所以我们需要声明样式文件是有副作用的。 在 package.json 中设置：</p><pre><code>sideEffects: [\n\t&#39;*.css&#39;\n]\n</code></pre><blockquote><p>总结，为了利用树木摇晃，你必须： 1 使用ES2015模块语法 (配置 babel 禁止转义 es6 模块语义） 2 将&quot;sideEffects&quot;属性添加到项目的 package.json文件中。 3 配合压缩工具一起使用</p></blockquote><p><a href="https://github.com/cleverboy32/tree-shaking-css">demo</a> 通过配置 <code>webpack.prod.js</code> sideEffects 值， 你可以看到 build 时 main.js 文件的大小发生改变。</p>',20)]))}]])}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuYnVuZGxlLmpzIiwibWFwcGluZ3MiOiIyS0FBZUEsTUFBTSxxQkNDZkMsRUFBUyxDQUFDLEVBS2hCLE9BRmlDLEUsT0FBQSxHQUFnQkEsRUFBUSxDQUFDLENBQUMsUyxnQ0RKakRDLEVBQUFBLEVBQUFBLElBNkNKLE1BN0NJQyxFQTZDSkMsRUFBQSxLQUFBQSxFQUFBLEtBN0NOQyxFQUFBQSxFQUFBQSxJQUFBLGlxRSIsInNvdXJjZXMiOlsid2VicGFjazovL2Nib3ktYmxvZy8uLi8uLi9ibG9ncy9tYXJrZG93bi93ZWJwYWNrLm1kIiwid2VicGFjazovL2Nib3ktYmxvZy8uLi8uLi9ibG9ncy9tYXJrZG93bi93ZWJwYWNrLm1kPzZiN2YiXSwic291cmNlc0NvbnRlbnQiOlsiPHRlbXBsYXRlPjxkaXYgY2xhc3M9XCJjb21wb25lbnQtd2VicGFja1wiPjxoND7kuIAgIHdlYnBhY2sg5piv5LuA5LmI77yfPC9oND5cbjxwPuWug+aYr+S4gOS4quaJk+WMheW3peWFt+OAgiDlmZfvvIzlrozllabvvJ88L3A+XG48cD7mnaXvvIzmiJHku6znnIvlrpjmlrnmpoLlv7U6ICB3ZWJwYWNrIOaYr+S4gOS4queOsOS7oyBKYXZhU2NyaXB0IOW6lOeUqOeoi+W6j+eahOmdmeaAgeaooeWdl+aJk+WMheW3peWFt+OAguW9kyB3ZWJwYWNrIOWkhOeQhuW6lOeUqOeoi+W6j+aXtu+8jOWug+S8muWcqOWGhemDqOaehOW7uuS4gOS4qiDkvp3otZblm74oZGVwZW5kZW5jeSBncmFwaCnvvIzmraTkvp3otZblm77kvJrmmKDlsITpobnnm67miYDpnIDnmoTmr4/kuKrmqKHlnZfvvIzlubbnlJ/miJDkuIDkuKrmiJblpJrkuKogYnVuZGxl44CCPC9wPlxuPHA+5YaF6YOo5aaC5L2V5p6E5bu65LiA5Liq5L6d6LWW5Zu+77yM5oiR5Lus55+l6YGTIHdlYnBhY2sg5Lya6YWN572u5LiA5Liq5YWl5Y+j77yM6L+Z5bCx5piv5LuO6L+Z5YWl5Y+j5paH5Lu25byA5aeL77yMIOaJvuWIsOaJgOacieiiq+S+nei1luWIsOeahOaWh+S7tu+8jOavlOWmguWFtuS7liBqcyAvIGltYWdlIC8ganNvbiDmlofku7bnrYnvvIznhLblkI7pgJrov4cgbG9hZGVyIOWvuei/meS6m+aWh+S7tui/m+ihjOWkhOeQhuOAgee8luivkeOAgeaJk+WMheOAgeS8mOWMlu+8jOeUn+aIkOS4gOS4qiBidW5kbGUg5oiW6ICF5aSa5LiqIGJ1bmRsZeOAgjwvcD5cbjxoND7lroPnmoTljp/nkIY8L2g0PlxuPHA+6YCa6L+H5Lul5LiK77yM5Li76KaB5bCx5piv5om+5L6d6LWWLCDpgJrov4fphY3nva7lpITnkIbnm7jlupTnjq/looPvvIzmoLnmja7kvaDnmoTpnIDopoHphY3nva7mj5Lku7bov5vooYzkvJjljJbvvIjlpoIgcHJvZmlsbOOAgWJhYmVs44CBIG1pbmlTaXplIGV0Yykg5omT5YyF5Ye65paH5Lu277yM5Y+v5Lul5pS+5Yiw5pyN5Yqh5Zmo5LiK6L+Q6KGM44CCPC9wPlxuPHA+5YWz5LqO5om+5L6d6LWW77yM5Y+v5Lul5oOz5Yiw5YWz5LqO5qih5Z2X5YyW55qE6K+t5rOVOiBpbXBvcnQg44CBcmVxdWlyZeOAgUBpbXBvcnQgZXRj77yMIOmAmui/h+ino+aekOWvueW6lOeahOivreazleWvu+aJvuebuOW6lOeahOS+nei1luOAgueEtuWQjumAmui/h+ivu+WPluS+nei1luWIsOeahOaWh+S7tu+8jOagueaNruWvueW6lOeahCBsb2FkZXIg6L+b6KGM5aSE55CG5paH5Lu277yM5pyA5ZCO5qC55o2u5L2g55qE5o+S5Lu26YWN572u77yM5YiG5Ymy77yM5Y6L57yp5oiW5rOo5YWl562J77yM5qC55o2uIG91dHB1dCBjb25maWfovpPlh7rliLDlr7nlupTnmoTmlofku7blpLnjgII8L3A+XG48cD7ov5nph4zmjqjojZDkuIDnr4cgPGEgaHJlZj1cImh0dHBzOi8vanVlamluLmltL2VudHJ5LzViMGUzZWJhNTE4ODI1MTUzNDM3OTYxNVwiPndlYnBhY2vljp/nkIY8L2E+IOaWh+eroCwg5LiL6Z2i5bCx5o+Q5LiA5o+Q5oiR5pyA6L+R6YGH5Yiw55qE5LiA5Liq5b6I56We5aWH55qE6Zeu6aKY5ZCnPC9wPlxuPGg0PuWFs+S6jiA8YSBocmVmPVwiaHR0cHM6Ly93ZWJwYWNrLmRvY3NjaGluYS5vcmcvZ3VpZGVzL3RyZWUtc2hha2luZy9cIj50cmVlIHNoYWtpbmc8L2E+PC9oND5cbjxwPuaDs+ixoeaKluS4gOaKluagke+8jOaer+iQjueahOWPtuWtkOWwseS8muiEseiQveOAgiDov5nph4zmjIfnmoTmmK/miormsqHmnInnlKjliLDnmoTku6PnoIHliKDpmaTmjonvvIzku47ogIzlh4/lsI/mlofku7bnmoTlpKflsI/jgILpgJrov4fov5nkuIDkvJjljJbvvIzlnKjlvJXnlKjlpJrkuKrnrKzkuInmlrnlupPml7bvvIzog73lpJ/lpKflpKfnmoTlh4/lsJHkvaDnmoTmlofku7blpKflsI/vvIzkvYbor7fnoa7lrprov5nkuKrljIXmmK/msqHmnInlia/kvZznlKjnmoTjgII8L3A+XG48YmxvY2txdW90ZT5cbjxwPuS7gOS5iOaYr+WJr+S9nOeUqD9cbuWwseaYr+WcqOWvvOWFpeaXtuS8muiHquihjOi/kOihjOS4gOauteWHveaVsO+8jOS7juiAjOaUueWPmOS6hiB3aW5kb3cg5Y+Y6YeP5ZWK5oiW6ICF5YW25LuW55qE5Y+Y6YeP5Lul5L6b5a+85YWl55qE5YyF6IO95q2j5bi46L+Q6KGM77yMIOiAjOS4jeaYr+WPquWNleWNlSBleHBvcnQg5LqG5Y+Y6YeP44CCPC9wPlxuPC9ibG9ja3F1b3RlPlxuPHA+5a6D5piv5L6d6LWW5LqOIGVzMjAxNSDnmoQgPGNvZGU+6Z2Z5oCB5a+85YWl5a+85Ye6KCBpbXBvcnQgLyBleHBvcnQpPC9jb2RlPuOAguWcqOaJk+WMheaXtuWwseS8mumAmui/hyBpbXBvcnQg56Gu5a6a5byV55So5YyF55qEIGV4cG9ydCDlr7zlh7rnmoTmn5DkuIDkuKrlj5jph4/kuYvkuIDvvIwg5Zyo5ZGK55+l5rKh5pyJ5Ymv5L2c55So55qE5oOF5Ya15LiL77yM5Yig6Zmk5o6J5rKh5pyJ55So5Yiw55qE5YW25LuW55qE5a+85Ye65Luj56CB44CCPC9wPlxuPGJsb2NrcXVvdGU+XG48cD7pnZnmgIHlr7zlhaXmmK/mjIfkuIDlvIDlp4vlsLHpu5jorqTliqDovb3ov5nkuKrmlofku7bvvIzogIzkuI3mmK/kuIDmraXkuIDmraXmiafooYzku6PnoIHliKTmlq3pgLvovpHvvIzljrvlr7zlhaXlr7nlupTmlofku7Y8L3A+XG48L2Jsb2NrcXVvdGU+XG48cD53ZWJwYWNrIOWcqOeUn+aIkOeOr+Wig+S4i++8jOm7mOiupOaJk+W8gOagkeaKluWKqOmFjee9riwg5aaC5LiL6YWN572u44CCPC9wPlxuPHByZSB2LXByZT1cIlwiPjxjb2RlPm9wdGltaXphdGlvbu+8miB7XG5cdHByb3ZpZGVkRXhwb3J0czogdHJ1ZSxcblx0dXNlZEV4cG9ydHM6IHRydWUsXG5cdHNpZGVFZmZlY3RzOiB0cnVlLFxuXHRjb25jYXRlbmF0ZU1vZHVsZXM6IHRydWUsXG4gfVxuPC9jb2RlPjwvcHJlPlxuPHA+PGNvZGU+cHJvdmlkZWRFeHBvcnRzPC9jb2RlPiDlvIDlkK8gZXhwb3J0IOWvvOWHuuaUtumbhu+8m1xuPGNvZGU+IHVzZWRFeHBvcnR0czwvY29kZT4g5ZGK6K+Jd2VicGFja+ehruWumuavj+S4quaooeWdl+eahOW3suS9v+eUqOWvvOWHuu+8m1xuPGNvZGU+IGNvbmNhdGVuYXRlTW9kdWxlczwvY29kZT4gIOWRiuiviXdlYnBhY2vmn6Xmib7mqKHlnZflm77nmoTlkITkuKrpg6jliIbvvIzov5nkupvpg6jliIblj6/ku6XlronlhajlnLDov57mjqXmiJDkuIDkuKrmqKHlnZfvvJtcbjxjb2RlPnNpZGVFZmZlY3RzPC9jb2RlPiDlkYror4l3ZWJwYWNr6K+G5YirIHNpZGVFZmZlY3RzIOagh+W/l+eahCBwYWNrYWdlLmpzb24g5oiW6KeE5YiZ5Lul6Lez6L+H5qih5Z2X77yM6L+Z5Lqb5qih5Z2X5Zyo5pyq5L2/55So5a+85Ye65pe26KKr5qCH6K6w5Li65LiN5YyF5ZCr5Ymv5L2c55So77yMIOWImeWPr+S7peaKiuaXoOWJr+S9nOeUqOeahOacquS9v+eUqOeahOWvvOWHuui/m+ihjOWIoOmZpOOAgjwvcD5cbjxwPuaJgOS7peWmguaenOS9oOeahOWMheaXoOWJr+S9nOeUqO+8jOaOqOiNkOWcqCBwYWNrYWdlLmpzb24g6K6+572uIDxjb2RlPnNpZGVFZmZlY3RzOiBmYWxzZTwvY29kZT4g5byA5ZCv5qCR5oqW5Yqo44CCXG7ms6jmhI8sIOWug+S8muWIoOaOieagt+W8j+aWh+S7tu+8jOWboOS4uuagt+W8j+aWh+S7tuaYr+ayoeaciSBleHBvcnQg55qE44CC5omA5Lul5oiR5Lus6ZyA6KaB5aOw5piO5qC35byP5paH5Lu25piv5pyJ5Ymv5L2c55So55qE44CCXG7lnKggcGFja2FnZS5qc29uIOS4reiuvue9ru+8mjwvcD5cbjxwcmUgdi1wcmU9XCJcIj48Y29kZT5zaWRlRWZmZWN0czogW1xuXHQnKi5jc3MnXG5dXG48L2NvZGU+PC9wcmU+XG48YmxvY2txdW90ZT5cbjxwPuaAu+e7k++8jOS4uuS6huWIqeeUqOagkeacqOaRh+aZg++8jOS9oOW/hemhu++8mlxuMSDkvb/nlKhFUzIwMTXmqKHlnZfor63ms5UgKOmFjee9riBiYWJlbCDnpoHmraLovazkuYkgZXM2IOaooeWdl+ivreS5ie+8iVxuMiDlsIZcInNpZGVFZmZlY3RzXCLlsZ7mgKfmt7vliqDliLDpobnnm67nmoQgcGFja2FnZS5qc29u5paH5Lu25Lit44CCXG4zIOmFjeWQiOWOi+e8qeW3peWFt+S4gOi1t+S9v+eUqDwvcD5cbjwvYmxvY2txdW90ZT5cbjxwPjxhIGhyZWY9XCJodHRwczovL2dpdGh1Yi5jb20vY2xldmVyYm95MzIvdHJlZS1zaGFraW5nLWNzc1wiPmRlbW88L2E+XG7pgJrov4fphY3nva4gIDxjb2RlPndlYnBhY2sucHJvZC5qczwvY29kZT4gc2lkZUVmZmVjdHMg5YC877yMIOS9oOWPr+S7peeci+WIsCBidWlsZCDml7YgbWFpbi5qcyDmlofku7bnmoTlpKflsI/lj5HnlJ/mlLnlj5jjgII8L3A+XG48L2Rpdj48L3RlbXBsYXRlPiIsImltcG9ydCB7IHJlbmRlciB9IGZyb20gXCIuL3dlYnBhY2subWQ/dnVlJnR5cGU9dGVtcGxhdGUmaWQ9NzE4NWVhYzBcIlxuY29uc3Qgc2NyaXB0ID0ge31cblxuaW1wb3J0IGV4cG9ydENvbXBvbmVudCBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Z1ZS1sb2FkZXJAMTcuNC4yX0B2dWUrY29tcGlsZXItc2ZjQDMuNS4zX3Z1ZUAzLjUuM190eXBlc2NyaXB0QDUuNS40X193ZWJwYWNrQDUuOTQuMF93ZWJwYWNrLV9mdXFrd2dncGxoZXkzb2l2dHdlMnN0ZG82ZS9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9kaXN0L2V4cG9ydEhlbHBlci5qc1wiXG5jb25zdCBfX2V4cG9ydHNfXyA9IC8qI19fUFVSRV9fKi9leHBvcnRDb21wb25lbnQoc2NyaXB0LCBbWydyZW5kZXInLHJlbmRlcl1dKVxuXG5leHBvcnQgZGVmYXVsdCBfX2V4cG9ydHNfXyJdLCJuYW1lcyI6WyJjbGFzcyIsInNjcmlwdCIsIl9jcmVhdGVFbGVtZW50QmxvY2siLCJfaG9pc3RlZF8xIiwiX2NhY2hlIiwiX2NyZWF0ZVN0YXRpY1ZOb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==